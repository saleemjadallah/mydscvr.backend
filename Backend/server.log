INFO:     Will watch for changes in these directories: ['/Users/saleemjadallah/Desktop/DXB-events/Backend']
INFO:     Uvicorn running on http://127.0.0.1:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [9416] using WatchFiles
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 15:15:46,912 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 15:15:46,998 - main - INFO - ‚úÖ AI search router included successfully
INFO:     Started server process [9419]
INFO:     Waiting for application startup.
2025-07-02 15:15:48,125 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 15:15:48,125 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 15:15:48,125 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:55469 - "GET /api/ai-search/status HTTP/1.1" 200 OK
2025-07-02 15:16:05,931 - routers.ai_search - INFO - AI Search: Analyzing query 'fun weekend activities for kids and families'
2025-07-02 15:16:08,805 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:16:08,829 - routers.ai_search - INFO - AI Search: Found 0 events matching filters
2025-07-02 15:16:11,966 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:16:13,471 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:16:13,473 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search?q=fun%20weekend%20activities%20for%20kids%20and%20families took 7.54s
INFO:     127.0.0.1:55523 - "GET /api/ai-search?q=fun%20weekend%20activities%20for%20kids%20and%20families HTTP/1.1" 200 OK
2025-07-02 15:16:22,870 - routers.ai_search - INFO - AI Search: Analyzing query 'summer activities'
2025-07-02 15:16:28,337 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:16:28,410 - routers.ai_search - INFO - AI Search: Found 28 events matching filters
2025-07-02 15:16:28,410 - routers.ai_search - INFO - AI Search: Using OpenAI to score 28 events
2025-07-02 15:16:28,411 - routers.ai_search - INFO - AI Search: Pre-filtered to 15 events for AI scoring
2025-07-02 15:16:46,910 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:16:50,649 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:16:51,643 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:16:51,644 - routers.ai_search - INFO - AI Search completed in 28774ms for query 'summer activities'
2025-07-02 15:16:51,700 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search?q=summer%20activities took 28.83s
INFO:     127.0.0.1:55627 - "GET /api/ai-search?q=summer%20activities HTTP/1.1" 200 OK
2025-07-02 15:17:02,917 - routers.ai_search - INFO - AI Search: Analyzing query 'beach'
2025-07-02 15:17:04,869 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:17:04,934 - routers.ai_search - INFO - AI Search: Found 28 events matching filters
2025-07-02 15:17:04,934 - routers.ai_search - INFO - AI Search: Using OpenAI to score 28 events
2025-07-02 15:17:04,934 - routers.ai_search - INFO - AI Search: Pre-filtered to 15 events for AI scoring
2025-07-02 15:17:31,950 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:17:34,273 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:17:35,729 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:17:35,733 - routers.ai_search - INFO - AI Search completed in 32815ms for query 'beach'
2025-07-02 15:17:35,786 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search?q=beach took 32.87s
INFO:     127.0.0.1:55837 - "GET /api/ai-search?q=beach HTTP/1.1" 200 OK
INFO:     127.0.0.1:56386 - "GET /api/ai-search/status HTTP/1.1" 200 OK
2025-07-02 17:34:34,111 - routers.ai_search - INFO - AI Search: Analyzing query 'test'
2025-07-02 17:34:35,359 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:34:35,362 - services.openai_service - ERROR - OpenAI query analysis failed: 1 validation error for QueryAnalysis
intent
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-07-02 17:34:35,565 - routers.ai_search - INFO - AI Search: Found 10 events matching filters
2025-07-02 17:34:35,565 - routers.ai_search - INFO - AI Search: Using OpenAI to score 10 events
2025-07-02 17:34:51,183 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:34:54,352 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:34:55,854 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:34:55,859 - routers.ai_search - INFO - AI Search completed in 21748ms for query 'test'
2025-07-02 17:34:55,910 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search?q=test&per_page=5 took 21.80s
INFO:     127.0.0.1:56475 - "GET /api/ai-search?q=test&per_page=5 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:41:26,439 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [9419]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:41:28,899 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:41:28,992 - main - INFO - ‚úÖ AI search router included successfully
INFO:     Started server process [23596]
INFO:     Waiting for application startup.
2025-07-02 18:41:30,053 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:41:30,053 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:41:30,053 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:41:31,695 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [23596]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:41:33,018 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:41:33,078 - main - INFO - ‚úÖ AI search router included successfully
INFO:     Started server process [23620]
INFO:     Waiting for application startup.
2025-07-02 18:41:34,136 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:41:34,136 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:41:34,136 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:42:17,546 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [23620]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:42:19,384 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:42:19,463 - main - INFO - ‚úÖ AI search router included successfully
INFO:     Started server process [23694]
INFO:     Waiting for application startup.
2025-07-02 18:42:20,616 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:42:20,616 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:42:20,616 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:42:24,285 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [23694]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:42:25,626 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:42:25,686 - main - INFO - ‚úÖ AI search router included successfully
INFO:     Started server process [23707]
INFO:     Waiting for application startup.
2025-07-02 18:42:26,735 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:42:26,735 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:42:26,735 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:43:44,659 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [23707]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:43:46,339 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:43:46,367 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 18:43:46,370 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 18:43:46,641 - main - INFO - ‚úÖ AI search router included successfully
INFO:     Started server process [23798]
INFO:     Waiting for application startup.
2025-07-02 18:43:47,755 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:43:47,755 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:43:47,755 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:43:54,252 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [23798]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:43:55,861 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:43:55,879 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 18:43:55,880 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 18:43:55,960 - main - INFO - ‚úÖ AI search router included successfully
INFO:     Started server process [23831]
INFO:     Waiting for application startup.
2025-07-02 18:43:57,404 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:43:57,404 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:43:57,404 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:44:15,206 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [23831]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
Process SpawnProcess-10:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 68, in serve
    config.load()
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/config.py", line 467, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/importer.py", line 21, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/importlib/__init__.py", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1381, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1354, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1325, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 929, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 990, in exec_module
  File "<frozen importlib._bootstrap_external>", line 1128, in get_code
  File "<frozen importlib._bootstrap_external>", line 1058, in source_to_code
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/saleemjadallah/Desktop/DXB-events/Backend/main.py", line 254
    else:
    ^^^^
SyntaxError: invalid syntax
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
Process SpawnProcess-11:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 68, in serve
    config.load()
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/config.py", line 467, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/importer.py", line 21, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/importlib/__init__.py", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1381, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1354, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1325, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 929, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 990, in exec_module
  File "<frozen importlib._bootstrap_external>", line 1128, in get_code
  File "<frozen importlib._bootstrap_external>", line 1058, in source_to_code
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/saleemjadallah/Desktop/DXB-events/Backend/main.py", line 254
    else:
    ^^^^
SyntaxError: invalid syntax
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:44:51,476 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:44:51,495 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 18:44:51,496 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 18:44:51,597 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 18:44:51,598 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [23979]
INFO:     Waiting for application startup.
2025-07-02 18:44:52,693 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:44:52,694 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:44:52,694 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:44:56,863 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [23979]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:44:58,128 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:44:58,145 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 18:44:58,146 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 18:44:58,205 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 18:44:58,206 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [23992]
INFO:     Waiting for application startup.
2025-07-02 18:44:59,185 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:44:59,185 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:44:59,185 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:56498 - "GET /api/ai-search-v2/status HTTP/1.1" 200 OK
2025-07-02 18:45:30,188 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-02 18:45:30,225 - services.openai_service_optimized - ERROR - Optimized AI analysis failed: 'datetime.datetime' object has no attribute 'split'
2025-07-02 18:45:30,226 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 63ms
INFO:     127.0.0.1:56577 - "GET /api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=5 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:45:47,673 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [23992]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:45:49,151 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:45:49,170 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 18:45:49,171 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 18:45:49,248 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 18:45:49,248 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [24111]
INFO:     Waiting for application startup.
2025-07-02 18:45:50,315 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:45:50,315 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:45:50,315 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 18:45:53,370 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [24111]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 18:45:54,669 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 18:45:54,686 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 18:45:54,687 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 18:45:54,747 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 18:45:54,747 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [24123]
INFO:     Waiting for application startup.
2025-07-02 18:45:55,842 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 18:45:55,842 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 18:45:55,842 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-02 18:46:03,973 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-02 18:46:14,476 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:46:14,479 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 10526ms
2025-07-02 18:46:14,480 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=kids%20activities%20this%20weekend&per_page=5 took 10.53s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:56788 - "GET /api/ai-search-v2?q=kids%20activities%20this%20weekend&per_page=5 HTTP/1.1" 200 OK
2025-07-02 18:46:37,195 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 20 initial events
2025-07-02 18:46:53,103 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:46:53,109 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 15978ms
2025-07-02 18:46:53,115 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=beach&per_page=5 took 15.98s
INFO:     127.0.0.1:56961 - "GET /api/ai-search-v2?q=beach&per_page=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61948 - "GET /api/events?page=1&per_page=5 HTTP/1.1" 405 Method Not Allowed
DEBUG: Found pricing data - base_price: 100.0, max_price: 1000.0
DEBUG: Event 'Dubai Opera Performances (Seas' has category: 'music'
DEBUG: Found pricing data - base_price: 5000.0, max_price: 20000.0
DEBUG: Event 'Destination Dubai VIP 25' has category: 'business'
DEBUG: Found pricing data - base_price: 40.0, max_price: 40.0
DEBUG: Event 'Weaving A Dream Of Thousands O' has category: 'cultural'
DEBUG: Found pricing data - base_price: 40.0, max_price: 40.0
DEBUG: Event 'Weaving A Dream Of Thousands O' has category: 'cultural'
DEBUG: Found pricing data - base_price: 320.0, max_price: 3795.0
DEBUG: Event 'Destination Dubai VIP 2025 - E' has category: 'luxury'
INFO:     127.0.0.1:62311 - "GET /api/events/?page=1&per_page=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62454 - "GET /api/search?q=test HTTP/1.1" 405 Method Not Allowed
2025-07-02 19:03:47,387 - routers.search - INFO - MongoDB search called with query='test', category='None', area='None'
2025-07-02 19:03:47,387 - routers.search - INFO - Adding text search for: 'test'
2025-07-02 19:03:47,387 - routers.search - INFO - Adding relevance scoring
2025-07-02 19:03:47,387 - routers.search - INFO - Executing aggregation pipeline with 4 stages
2025-07-02 19:03:47,470 - routers.search - INFO - Aggregation complete: found 20 events out of 62 total
INFO:     127.0.0.1:62540 - "GET /api/search/?q=test HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 19:50:26,902 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [24123]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 19:50:28,787 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 19:50:28,813 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 19:50:28,814 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 19:50:28,924 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 19:50:28,924 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [30043]
INFO:     Waiting for application startup.
2025-07-02 19:50:29,986 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 19:50:29,986 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 19:50:29,986 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 19:50:34,768 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [30043]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 19:50:36,513 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 19:50:36,532 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 19:50:36,533 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 19:50:36,617 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 19:50:36,618 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [30053]
INFO:     Waiting for application startup.
2025-07-02 19:50:37,690 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 19:50:37,691 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 19:50:37,691 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 19:53:53,866 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [30053]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 19:53:55,262 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 19:53:55,281 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 19:53:55,281 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 19:53:55,375 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 19:53:55,375 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [30627]
INFO:     Waiting for application startup.
2025-07-02 19:53:56,398 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 19:53:56,398 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 19:53:56,398 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 19:53:59,655 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [30627]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 19:54:01,233 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 19:54:01,252 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 19:54:01,253 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 19:54:01,341 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 19:54:01,341 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [30644]
INFO:     Waiting for application startup.
2025-07-02 19:54:02,433 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 19:54:02,433 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 19:54:02,433 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 19:54:04,474 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [30644]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 19:54:05,831 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 19:54:05,850 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 19:54:05,851 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 19:54:05,911 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 19:54:05,911 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [30655]
INFO:     Waiting for application startup.
2025-07-02 19:54:07,001 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 19:54:07,001 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 19:54:07,001 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 19:54:10,261 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [30655]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 19:54:11,600 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 19:54:11,617 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 19:54:11,618 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 19:54:11,679 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 19:54:11,679 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [30669]
INFO:     Waiting for application startup.
2025-07-02 19:54:12,678 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 19:54:12,678 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 19:54:12,678 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 19:54:13,714 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [30669]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 19:54:15,079 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 19:54:15,098 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 19:54:15,099 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 19:54:15,160 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 19:54:15,160 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [30676]
INFO:     Waiting for application startup.
2025-07-02 19:54:16,214 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 19:54:16,215 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 19:54:16,215 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 19:54:18,866 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [30676]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 19:54:20,186 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 19:54:20,203 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 19:54:20,204 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 19:54:20,268 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 19:54:20,268 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [30687]
INFO:     Waiting for application startup.
2025-07-02 19:54:21,364 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 19:54:21,364 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 19:54:21,364 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 21:02:19,155 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [30687]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 21:02:20,727 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 21:02:20,747 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 21:02:20,747 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 21:02:20,838 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 21:02:20,838 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [33006]
INFO:     Waiting for application startup.
2025-07-02 21:02:21,916 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 21:02:21,916 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 21:02:21,917 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 21:02:28,098 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [33006]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 21:02:29,566 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 21:02:29,584 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 21:02:29,585 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 21:02:29,662 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 21:02:29,662 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [33019]
INFO:     Waiting for application startup.
2025-07-02 21:02:30,764 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 21:02:30,764 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 21:02:30,764 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 21:02:51,297 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [33019]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 21:02:52,628 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 21:02:52,647 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 21:02:52,648 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 21:02:52,725 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 21:02:52,725 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [35445]
INFO:     Waiting for application startup.
2025-07-02 21:02:53,777 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 21:02:53,777 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 21:02:53,777 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 21:02:58,539 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [35445]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 21:02:59,964 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 21:02:59,981 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 21:02:59,982 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 21:03:00,068 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 21:03:00,068 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [37113]
INFO:     Waiting for application startup.
2025-07-02 21:03:01,191 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 21:03:01,191 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 21:03:01,191 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-02 21:03:27,050 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-02 21:03:30,300 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 21:03:30,309 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3294ms
2025-07-02 21:03:30,311 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=family%20events%20in%20january&per_page=3 took 3.30s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:62888 - "GET /api/ai-search-v2?q=family%20events%20in%20january&per_page=3 HTTP/1.1" 200 OK
DEBUG: Found pricing data - base_price: 100.0, max_price: 1000.0
DEBUG: Event 'Dubai Opera Performances (Seas' has category: 'music'
DEBUG: Found pricing data - base_price: 5000.0, max_price: 20000.0
DEBUG: Event 'Destination Dubai VIP 25' has category: 'business'
DEBUG: Found pricing data - base_price: 40.0, max_price: 40.0
DEBUG: Event 'Weaving A Dream Of Thousands O' has category: 'cultural'
DEBUG: Found pricing data - base_price: 40.0, max_price: 40.0
DEBUG: Event 'Weaving A Dream Of Thousands O' has category: 'cultural'
DEBUG: Found pricing data - base_price: 320.0, max_price: 3795.0
DEBUG: Event 'Destination Dubai VIP 2025 - E' has category: 'luxury'
INFO:     127.0.0.1:62990 - "GET /api/events/?page=1&per_page=5&sort_by=start_date HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:26:19,468 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [37113]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:26:21,044 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:26:21,064 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:26:21,065 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:26:21,158 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:26:21,158 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49425]
INFO:     Waiting for application startup.
2025-07-02 22:26:22,187 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:26:22,187 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:26:22,187 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:26:27,058 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49425]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:26:28,315 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:26:28,332 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:26:28,332 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:26:28,391 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:26:28,392 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49440]
INFO:     Waiting for application startup.
2025-07-02 22:26:29,453 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:26:29,453 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:26:29,453 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:26:55,154 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49440]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:26:56,444 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:26:56,462 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:26:56,463 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:26:56,518 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:26:56,518 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49466]
INFO:     Waiting for application startup.
2025-07-02 22:26:57,571 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:26:57,571 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:26:57,571 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:27:01,026 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49466]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:27:02,582 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:27:02,600 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:27:02,601 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:27:02,659 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:27:02,660 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49484]
INFO:     Waiting for application startup.
2025-07-02 22:27:03,738 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:27:03,738 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:27:03,738 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:27:06,999 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49484]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:27:08,268 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:27:08,284 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:27:08,285 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:27:08,347 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:27:08,348 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49502]
INFO:     Waiting for application startup.
2025-07-02 22:27:09,441 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:27:09,441 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:27:09,441 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:27:26,549 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49502]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:27:28,072 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:27:28,090 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:27:28,091 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:27:28,162 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:27:28,162 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49526]
INFO:     Waiting for application startup.
2025-07-02 22:27:30,193 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:27:30,193 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:27:30,193 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:27:32,342 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49526]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:27:33,800 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:27:33,816 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:27:33,817 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:27:33,875 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:27:33,875 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49543]
INFO:     Waiting for application startup.
2025-07-02 22:27:34,874 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:27:34,874 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:27:34,874 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:28:13,006 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49543]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:28:14,299 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:28:14,319 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:28:14,320 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:28:14,378 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:28:14,379 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49572]
INFO:     Waiting for application startup.
2025-07-02 22:28:15,563 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:28:15,564 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:28:15,564 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:28:21,353 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49572]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:28:22,516 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:28:22,533 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:28:22,534 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:28:22,595 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:28:22,596 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49593]
INFO:     Waiting for application startup.
2025-07-02 22:28:23,704 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:28:23,704 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:28:23,705 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:28:35,450 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49593]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:28:36,806 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:28:36,825 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:28:36,825 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:28:36,880 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:28:36,881 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49614]
INFO:     Waiting for application startup.
2025-07-02 22:28:37,993 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:28:37,993 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:28:37,993 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:28:40,757 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49614]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:28:41,983 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:28:42,001 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:28:42,001 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:28:42,058 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:28:42,058 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49623]
INFO:     Waiting for application startup.
2025-07-02 22:28:43,084 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:28:43,084 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:28:43,084 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:28:48,464 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49623]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:28:49,670 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:28:49,690 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:28:49,690 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:28:49,752 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:28:49,755 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49640]
INFO:     Waiting for application startup.
2025-07-02 22:28:50,882 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:28:50,882 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:28:50,882 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-02 22:28:53,937 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49640]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-02 22:28:55,246 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-02 22:28:55,265 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-02 22:28:55,266 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-02 22:28:55,326 - main - INFO - ‚úÖ AI search router included successfully
2025-07-02 22:28:55,326 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [49649]
INFO:     Waiting for application startup.
2025-07-02 22:28:56,357 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-02 22:28:56,357 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-02 22:28:56,357 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 07:09:58,579 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:10:02,503 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:10:02,509 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 4223ms
2025-07-03 07:10:02,511 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=free%20family%20events%20this%20weekend&per_page=3 took 4.23s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:60444 - "GET /api/ai-search-v2?q=free%20family%20events%20this%20weekend&per_page=3 HTTP/1.1" 200 OK
2025-07-03 07:16:49,160 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 9 initial events
2025-07-03 07:16:58,205 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:16:58,207 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 9277ms
2025-07-03 07:16:58,208 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=cultural%20events%20in%20january&per_page=3 took 9.28s
INFO:     127.0.0.1:62393 - "GET /api/ai-search-v2?q=cultural%20events%20in%20january&per_page=3 HTTP/1.1" 200 OK
2025-07-03 07:21:14,854 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:21:19,106 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:21:19,109 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 4282ms
2025-07-03 07:21:19,110 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=free%20family%20events%20this%20weekend&per_page=3 took 4.29s
INFO:     127.0.0.1:63721 - "GET /api/ai-search-v2?q=free%20family%20events%20this%20weekend&per_page=3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63825 - "GET /api/events?per_page=3 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:63872 - "GET /api/events?per_page=3 HTTP/1.1" 405 Method Not Allowed
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:21:50,675 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [49649]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:21:52,957 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:21:52,981 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:21:52,982 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:21:53,091 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:21:53,092 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [59373]
INFO:     Waiting for application startup.
2025-07-03 07:21:54,344 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:21:54,344 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:21:54,344 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:21:57,999 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [59373]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:21:59,581 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:21:59,604 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:21:59,605 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:21:59,695 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:21:59,696 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [59393]
INFO:     Waiting for application startup.
2025-07-03 07:22:00,870 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:22:00,870 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:22:00,870 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:22:03,615 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [59393]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:22:05,034 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:22:05,055 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:22:05,056 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:22:05,123 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:22:05,123 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [59402]
INFO:     Waiting for application startup.
2025-07-03 07:22:06,320 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:22:06,320 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:22:06,320 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 07:22:06,351 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
2025-07-03 07:22:09,741 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:22:09,747 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3422ms
2025-07-03 07:22:09,749 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=free%20family%20events%20this%20weekend&per_page=3 took 3.43s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:64063 - "GET /api/ai-search-v2?q=free%20family%20events%20this%20weekend&per_page=3 HTTP/1.1" 200 OK
INFO:     Waiting for application shutdown.
2025-07-03 07:22:09,831 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [59402]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:22:11,554 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:22:11,575 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:22:11,576 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:22:11,651 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:22:11,651 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [59462]
INFO:     Waiting for application startup.
2025-07-03 07:22:12,804 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:22:12,805 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:22:12,805 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 07:22:20,596 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 2 initial events
2025-07-03 07:22:23,798 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:22:23,802 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3237ms
2025-07-03 07:22:23,803 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=cultural%20events%20in%20january&per_page=2 took 3.24s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:64161 - "GET /api/ai-search-v2?q=cultural%20events%20in%20january&per_page=2 HTTP/1.1" 200 OK
2025-07-03 07:22:39,953 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:22:42,632 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:22:42,648 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 2717ms
2025-07-03 07:22:42,649 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=free%20events%20today&per_page=2 took 2.72s
INFO:     127.0.0.1:64264 - "GET /api/ai-search-v2?q=free%20events%20today&per_page=2 HTTP/1.1" 200 OK
2025-07-03 07:28:23,968 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:28:27,196 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:28:27,197 - services.openai_service_optimized - ERROR - Optimized AI analysis failed: 1 validation error for OptimizedQueryAnalysis
categories.0
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-07-03 07:28:27,197 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3257ms
2025-07-03 07:28:27,198 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=events%20this%20weekend&per_page=3 took 3.26s
INFO:     127.0.0.1:49602 - "GET /api/ai-search-v2?q=events%20this%20weekend&per_page=3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50269 - "POST /api/direct-db-query HTTP/1.1" 405 Method Not Allowed
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:30:50,411 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [59462]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:30:52,427 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:30:52,450 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:30:52,451 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:30:52,544 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:30:52,544 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [64495]
INFO:     Waiting for application startup.
2025-07-03 07:30:53,701 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:30:53,702 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:30:53,702 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:30:57,272 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [64495]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:30:59,351 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:30:59,374 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:30:59,375 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:30:59,471 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:30:59,472 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [64516]
INFO:     Waiting for application startup.
2025-07-03 07:31:00,628 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:31:00,628 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:31:00,628 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:31:04,193 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [64516]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:31:05,635 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:31:05,658 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:31:05,659 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:31:05,739 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:31:05,740 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [64750]
INFO:     Waiting for application startup.
2025-07-03 07:31:06,911 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:31:06,911 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:31:06,911 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 07:31:06,915 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 7, 31, 6, 915894)}, '$and': [{'$or': [{'title': {'$regex': 'events', '$options': 'i'}}, {'description': {'$regex': 'events', '$options': 'i'}}, {'tags': {'$regex': 'events', '$options': 'i'}}, {'category': {'$regex': 'events', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'this', '$options': 'i'}}, {'description': {'$regex': 'this', '$options': 'i'}}, {'tags': {'$regex': 'this', '$options': 'i'}}, {'category': {'$regex': 'this', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'weekend', '$options': 'i'}}, {'description': {'$regex': 'weekend', '$options': 'i'}}, {'tags': {'$regex': 'weekend', '$options': 'i'}}, {'category': {'$regex': 'weekend', '$options': 'i'}}]}], 'start_date': {'$gte': datetime.datetime(2025, 6, 30, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}
2025-07-03 07:31:06,942 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:31:10,045 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:31:10,048 - services.openai_service_optimized - ERROR - Optimized AI analysis failed: 1 validation error for OptimizedQueryAnalysis
categories.0
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-07-03 07:31:10,048 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3132ms
2025-07-03 07:31:10,049 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=events%20this%20weekend&per_page=2 took 3.13s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:50511 - "GET /api/ai-search-v2?q=events%20this%20weekend&per_page=2 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:31:53,602 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [64750]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:31:55,688 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:31:55,711 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:31:55,712 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:31:55,806 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:31:55,806 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65385]
INFO:     Waiting for application startup.
2025-07-03 07:31:56,997 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:31:56,997 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:31:56,997 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:32:01,768 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [65385]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:32:03,376 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:32:03,397 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:32:03,398 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:32:03,489 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:32:03,489 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65424]
INFO:     Waiting for application startup.
2025-07-03 07:32:04,691 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:32:04,691 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:32:04,691 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:32:08,149 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [65424]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:32:09,753 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:32:09,777 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:32:09,778 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:32:09,876 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:32:09,876 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65454]
INFO:     Waiting for application startup.
2025-07-03 07:32:11,086 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:32:11,086 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:32:11,086 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:32:15,251 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [65454]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:32:16,776 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:32:16,798 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:32:16,798 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:32:16,945 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:32:16,946 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65503]
INFO:     Waiting for application startup.
2025-07-03 07:32:18,143 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:32:18,143 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:32:18,143 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 07:32:18,147 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 07:32:18,147 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 7, 32, 18, 147184)}, '$and': [{'$or': [{'title': {'$regex': 'events', '$options': 'i'}}, {'description': {'$regex': 'events', '$options': 'i'}}, {'tags': {'$regex': 'events', '$options': 'i'}}, {'category': {'$regex': 'events', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'this', '$options': 'i'}}, {'description': {'$regex': 'this', '$options': 'i'}}, {'tags': {'$regex': 'this', '$options': 'i'}}, {'category': {'$regex': 'this', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'weekend', '$options': 'i'}}, {'description': {'$regex': 'weekend', '$options': 'i'}}, {'tags': {'$regex': 'weekend', '$options': 'i'}}, {'category': {'$regex': 'weekend', '$options': 'i'}}]}], 'start_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}
2025-07-03 07:32:18,168 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:32:21,845 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:32:21,850 - services.openai_service_optimized - ERROR - Optimized AI analysis failed: 1 validation error for OptimizedQueryAnalysis
categories.0
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-07-03 07:32:21,851 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3704ms
2025-07-03 07:32:21,853 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=events%20this%20weekend&per_page=2 took 3.71s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:50920 - "GET /api/ai-search-v2?q=events%20this%20weekend&per_page=2 HTTP/1.1" 200 OK
2025-07-03 07:32:35,502 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 07:32:35,502 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 7, 32, 35, 502743)}, '$and': [{'$or': [{'title': {'$regex': 'events', '$options': 'i'}}, {'description': {'$regex': 'events', '$options': 'i'}}, {'tags': {'$regex': 'events', '$options': 'i'}}, {'category': {'$regex': 'events', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'this', '$options': 'i'}}, {'description': {'$regex': 'this', '$options': 'i'}}, {'tags': {'$regex': 'this', '$options': 'i'}}, {'category': {'$regex': 'this', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'weekend', '$options': 'i'}}, {'description': {'$regex': 'weekend', '$options': 'i'}}, {'tags': {'$regex': 'weekend', '$options': 'i'}}, {'category': {'$regex': 'weekend', '$options': 'i'}}]}], 'start_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}
2025-07-03 07:32:35,526 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:32:38,052 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:32:38,055 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 2552ms
2025-07-03 07:32:38,056 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=events%20this%20weekend&per_page=2 took 2.55s
INFO:     127.0.0.1:51034 - "GET /api/ai-search-v2?q=events%20this%20weekend&per_page=2 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:34:04,526 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [65503]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:34:06,103 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:34:06,126 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:34:06,127 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:34:06,242 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:34:06,243 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65670]
INFO:     Waiting for application startup.
2025-07-03 07:34:07,479 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:34:07,479 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:34:07,479 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:34:12,150 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [65670]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:34:13,867 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:34:13,889 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:34:13,890 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:34:13,995 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:34:13,995 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65688]
INFO:     Waiting for application startup.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
2025-07-03 07:34:15,160 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:34:15,160 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:34:15,160 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 07:34:15,182 - main - INFO - ‚úÖ All database connections closed
ERROR:    Traceback (most recent call last):
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/starlette/routing.py", line 686, in lifespan
    await receive()
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:34:17,181 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:34:17,206 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:34:17,207 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:34:17,288 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:34:17,288 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65699]
INFO:     Waiting for application startup.
2025-07-03 07:34:18,429 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:34:18,429 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:34:18,429 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:34:20,268 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [65699]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:34:21,680 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:34:21,701 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:34:21,702 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:34:21,775 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:34:21,776 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65708]
INFO:     Waiting for application startup.
2025-07-03 07:34:23,001 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:34:23,001 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:34:23,001 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:34:27,976 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [65708]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:34:29,832 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:34:29,856 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:34:29,857 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:34:29,944 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:34:29,944 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65721]
INFO:     Waiting for application startup.
2025-07-03 07:34:31,156 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:34:31,158 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:34:31,158 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 07:34:33,814 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [65721]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 07:34:35,269 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 07:34:35,289 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 07:34:35,290 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 07:34:35,366 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 07:34:35,366 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [65731]
INFO:     Waiting for application startup.
2025-07-03 07:34:36,589 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 07:34:36,589 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 07:34:36,589 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 07:34:36,598 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 07:34:36,598 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 7, 34, 36, 598106)}, '$and': [{'$or': [{'title': {'$regex': 'events', '$options': 'i'}}, {'description': {'$regex': 'events', '$options': 'i'}}, {'tags': {'$regex': 'events', '$options': 'i'}}, {'category': {'$regex': 'events', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'this', '$options': 'i'}}, {'description': {'$regex': 'this', '$options': 'i'}}, {'tags': {'$regex': 'this', '$options': 'i'}}, {'category': {'$regex': 'this', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'weekend', '$options': 'i'}}, {'description': {'$regex': 'weekend', '$options': 'i'}}, {'tags': {'$regex': 'weekend', '$options': 'i'}}, {'category': {'$regex': 'weekend', '$options': 'i'}}]}], '$or': [{'start_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'$and': [{'start_date': {'$lte': datetime.datetime(2025, 7, 5, 0, 0)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}]}]}
2025-07-03 07:34:36,636 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:34:40,479 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:34:40,482 - services.openai_service_optimized - ERROR - Optimized AI analysis failed: 1 validation error for OptimizedQueryAnalysis
categories.0
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-07-03 07:34:40,483 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3885ms
2025-07-03 07:34:40,484 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=events%20this%20weekend&per_page=3 took 3.89s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:51724 - "GET /api/ai-search-v2?q=events%20this%20weekend&per_page=3 HTTP/1.1" 200 OK
2025-07-03 07:37:02,924 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 07:37:02,924 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 7, 37, 2, 924440)}, '$and': [{'$or': [{'title': {'$regex': 'events', '$options': 'i'}}, {'description': {'$regex': 'events', '$options': 'i'}}, {'tags': {'$regex': 'events', '$options': 'i'}}, {'category': {'$regex': 'events', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'this', '$options': 'i'}}, {'description': {'$regex': 'this', '$options': 'i'}}, {'tags': {'$regex': 'this', '$options': 'i'}}, {'category': {'$regex': 'this', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'weekend', '$options': 'i'}}, {'description': {'$regex': 'weekend', '$options': 'i'}}, {'tags': {'$regex': 'weekend', '$options': 'i'}}, {'category': {'$regex': 'weekend', '$options': 'i'}}]}], '$or': [{'start_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'$and': [{'start_date': {'$lte': datetime.datetime(2025, 7, 5, 0, 0)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}]}]}
2025-07-03 07:37:02,965 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:37:07,068 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:37:07,069 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 4145ms
2025-07-03 07:37:07,070 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=events%20this%20weekend&per_page=3 took 4.15s
INFO:     127.0.0.1:52393 - "GET /api/ai-search-v2?q=events%20this%20weekend&per_page=3 HTTP/1.1" 200 OK
2025-07-03 07:38:05,416 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 7, 38, 5, 416705)}, '$and': [{'$or': [{'title': {'$regex': 'free', '$options': 'i'}}, {'description': {'$regex': 'free', '$options': 'i'}}, {'tags': {'$regex': 'free', '$options': 'i'}}, {'category': {'$regex': 'free', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'events', '$options': 'i'}}, {'description': {'$regex': 'events', '$options': 'i'}}, {'tags': {'$regex': 'events', '$options': 'i'}}, {'category': {'$regex': 'events', '$options': 'i'}}]}], '$or': [{'price': {'$regex': 'free', '$options': 'i'}}, {'pricing.base_price': 0}, {'price': '0'}, {'price': 'Free'}]}
2025-07-03 07:38:05,460 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 2 initial events
2025-07-03 07:38:07,917 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:38:07,918 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 2501ms
2025-07-03 07:38:07,919 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=free%20events&per_page=3 took 2.50s
INFO:     127.0.0.1:52712 - "GET /api/ai-search-v2?q=free%20events&per_page=3 HTTP/1.1" 200 OK
2025-07-03 07:38:20,850 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 7, 38, 20, 850875)}, '$and': [{'$or': [{'title': {'$regex': 'free', '$options': 'i'}}, {'description': {'$regex': 'free', '$options': 'i'}}, {'tags': {'$regex': 'free', '$options': 'i'}}, {'category': {'$regex': 'free', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'activities', '$options': 'i'}}, {'description': {'$regex': 'activities', '$options': 'i'}}, {'tags': {'$regex': 'activities', '$options': 'i'}}, {'category': {'$regex': 'activities', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'for', '$options': 'i'}}, {'description': {'$regex': 'for', '$options': 'i'}}, {'tags': {'$regex': 'for', '$options': 'i'}}, {'category': {'$regex': 'for', '$options': 'i'}}]}], '$or': [{'price': {'$regex': 'free', '$options': 'i'}}, {'pricing.base_price': 0}, {'price': '0'}, {'price': 'Free'}]}
2025-07-03 07:38:20,887 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 6 initial events
2025-07-03 07:38:25,781 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:38:25,782 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 4931ms
2025-07-03 07:38:25,782 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=free%20activities%20for%20families&per_page=3 took 4.93s
INFO:     127.0.0.1:52791 - "GET /api/ai-search-v2?q=free%20activities%20for%20families&per_page=3 HTTP/1.1" 200 OK
2025-07-03 07:38:54,489 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 7, 38, 54, 489401)}, '$and': [{'$or': [{'title': {'$regex': 'cheap', '$options': 'i'}}, {'description': {'$regex': 'cheap', '$options': 'i'}}, {'tags': {'$regex': 'cheap', '$options': 'i'}}, {'category': {'$regex': 'cheap', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'family', '$options': 'i'}}, {'description': {'$regex': 'family', '$options': 'i'}}, {'tags': {'$regex': 'family', '$options': 'i'}}, {'category': {'$regex': 'family', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'events', '$options': 'i'}}, {'description': {'$regex': 'events', '$options': 'i'}}, {'tags': {'$regex': 'events', '$options': 'i'}}, {'category': {'$regex': 'events', '$options': 'i'}}]}], '$or': [{'is_family_friendly': True}, {'familyScore': {'$gte': 70}}, {'tags': {'$in': ['family-friendly', 'family', 'kids']}}]}
2025-07-03 07:38:54,525 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 07:38:58,283 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 07:38:58,289 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3799ms
2025-07-03 07:38:58,290 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=cheap%20family%20events&per_page=2 took 3.80s
INFO:     127.0.0.1:52962 - "GET /api/ai-search-v2?q=cheap%20family%20events&per_page=2 HTTP/1.1" 200 OK
2025-07-03 08:22:32,325 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 08:22:32,325 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 22, 32, 325050)}, '$and': [{'$or': [{'title': {'$regex': 'where', '$options': 'i'}}, {'description': {'$regex': 'where', '$options': 'i'}}, {'tags': {'$regex': 'where', '$options': 'i'}}, {'category': {'$regex': 'where', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'can', '$options': 'i'}}, {'description': {'$regex': 'can', '$options': 'i'}}, {'tags': {'$regex': 'can', '$options': 'i'}}, {'category': {'$regex': 'can', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'i', '$options': 'i'}}, {'description': {'$regex': 'i', '$options': 'i'}}, {'tags': {'$regex': 'i', '$options': 'i'}}, {'category': {'$regex': 'i', '$options': 'i'}}]}], '$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}
2025-07-03 08:22:32,518 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:22:35,745 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:22:35,746 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3421ms
2025-07-03 08:22:35,747 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=3 took 3.42s
INFO:     127.0.0.1:59468 - "GET /api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=3 HTTP/1.1" 200 OK
2025-07-03 08:22:56,769 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 22, 56, 769500)}, '$and': [{'$or': [{'title': {'$regex': 'family', '$options': 'i'}}, {'description': {'$regex': 'family', '$options': 'i'}}, {'tags': {'$regex': 'family', '$options': 'i'}}, {'category': {'$regex': 'family', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'activities', '$options': 'i'}}, {'description': {'$regex': 'activities', '$options': 'i'}}, {'tags': {'$regex': 'activities', '$options': 'i'}}, {'category': {'$regex': 'activities', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'saturday', '$options': 'i'}}, {'description': {'$regex': 'saturday', '$options': 'i'}}, {'tags': {'$regex': 'saturday', '$options': 'i'}}, {'category': {'$regex': 'saturday', '$options': 'i'}}]}], '$or': [{'is_family_friendly': True}, {'familyScore': {'$gte': 70}}, {'tags': {'$in': ['family-friendly', 'family', 'kids']}}]}
2025-07-03 08:22:56,801 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:22:59,764 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:22:59,765 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 2996ms
2025-07-03 08:22:59,766 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=family%20activities%20saturday%20sunday&per_page=2 took 3.00s
INFO:     127.0.0.1:59600 - "GET /api/ai-search-v2?q=family%20activities%20saturday%20sunday&per_page=2 HTTP/1.1" 200 OK
2025-07-03 08:23:09,658 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 08:23:09,658 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 23, 9, 658085)}, '$and': [{'$or': [{'title': {'$regex': "what's", '$options': 'i'}}, {'description': {'$regex': "what's", '$options': 'i'}}, {'tags': {'$regex': "what's", '$options': 'i'}}, {'category': {'$regex': "what's", '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'happening', '$options': 'i'}}, {'description': {'$regex': 'happening', '$options': 'i'}}, {'tags': {'$regex': 'happening', '$options': 'i'}}, {'category': {'$regex': 'happening', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'for', '$options': 'i'}}, {'description': {'$regex': 'for', '$options': 'i'}}, {'tags': {'$regex': 'for', '$options': 'i'}}, {'category': {'$regex': 'for', '$options': 'i'}}]}], '$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}
2025-07-03 08:23:09,687 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:23:12,915 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:23:12,920 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3262ms
2025-07-03 08:23:12,925 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=what%27s%20happening%20for%20children%20this%20weekend&per_page=2 took 3.27s
INFO:     127.0.0.1:59666 - "GET /api/ai-search-v2?q=what%27s%20happening%20for%20children%20this%20weekend&per_page=2 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:24:59,992 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [65731]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:25:01,945 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:25:01,968 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:25:01,969 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:25:02,076 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:25:02,076 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [90459]
INFO:     Waiting for application startup.
2025-07-03 08:25:03,317 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:25:03,317 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:25:03,317 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:25:07,483 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [90459]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:25:09,029 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:25:09,050 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:25:09,050 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:25:09,124 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:25:09,125 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [90476]
INFO:     Waiting for application startup.
2025-07-03 08:25:10,288 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:25:10,289 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:25:10,289 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:25:17,683 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [90476]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:25:19,360 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:25:19,383 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:25:19,384 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:25:19,489 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:25:19,489 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [90502]
INFO:     Waiting for application startup.
2025-07-03 08:25:20,700 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:25:20,701 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:25:20,701 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:25:23,349 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [90502]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:25:24,823 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:25:24,843 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:25:24,844 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:25:24,936 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:25:24,936 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [90513]
INFO:     Waiting for application startup.
2025-07-03 08:25:26,155 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:25:26,155 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:25:26,155 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:25:31,332 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [90513]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:25:33,184 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:25:33,206 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:25:33,207 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:25:33,310 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:25:33,310 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [90532]
INFO:     Waiting for application startup.
2025-07-03 08:25:34,526 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:25:34,526 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:25:34,526 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:25:37,073 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [90532]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:25:38,724 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:25:38,748 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:25:38,749 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:25:38,826 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:25:38,827 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [90541]
INFO:     Waiting for application startup.
2025-07-03 08:25:40,079 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:25:40,079 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:25:40,079 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 08:25:41,269 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 08:25:41,269 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 25, 41, 269194)}, '$and': [{'$or': [{'title': {'$regex': 'events', '$options': 'i'}}, {'description': {'$regex': 'events', '$options': 'i'}}, {'tags': {'$regex': 'events', '$options': 'i'}}, {'category': {'$regex': 'events', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'this', '$options': 'i'}}, {'description': {'$regex': 'this', '$options': 'i'}}, {'tags': {'$regex': 'this', '$options': 'i'}}, {'category': {'$regex': 'this', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'weekend', '$options': 'i'}}, {'description': {'$regex': 'weekend', '$options': 'i'}}, {'tags': {'$regex': 'weekend', '$options': 'i'}}, {'category': {'$regex': 'weekend', '$options': 'i'}}]}], '$or': [{'start_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'$and': [{'start_date': {'$lte': datetime.datetime(2025, 7, 5, 0, 0)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}]}]}
2025-07-03 08:25:41,297 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:25:52,738 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:25:52,744 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 11475ms
2025-07-03 08:25:52,746 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=events%20this%20weekend&per_page=3 took 11.48s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:60504 - "GET /api/ai-search-v2?q=events%20this%20weekend&per_page=3 HTTP/1.1" 200 OK
2025-07-03 08:26:08,443 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 08:26:08,443 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 26, 8, 443680)}, '$and': [{'$or': [{'title': {'$regex': 'free', '$options': 'i'}}, {'description': {'$regex': 'free', '$options': 'i'}}, {'tags': {'$regex': 'free', '$options': 'i'}}, {'category': {'$regex': 'free', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'events', '$options': 'i'}}, {'description': {'$regex': 'events', '$options': 'i'}}, {'tags': {'$regex': 'events', '$options': 'i'}}, {'category': {'$regex': 'events', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'this', '$options': 'i'}}, {'description': {'$regex': 'this', '$options': 'i'}}, {'tags': {'$regex': 'this', '$options': 'i'}}, {'category': {'$regex': 'this', '$options': 'i'}}]}], '$or': [{'price': {'$regex': 'free', '$options': 'i'}}, {'pricing.base_price': 0}, {'price': '0'}, {'price': 'Free'}]}
2025-07-03 08:26:08,478 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:26:14,063 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:26:14,064 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 5620ms
2025-07-03 08:26:14,065 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=free%20events%20this%20weekend&per_page=2 took 5.62s
INFO:     127.0.0.1:60641 - "GET /api/ai-search-v2?q=free%20events%20this%20weekend&per_page=2 HTTP/1.1" 200 OK
2025-07-03 08:26:24,571 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 08:26:24,572 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 26, 24, 571927)}, '$and': [{'$or': [{'title': {'$regex': 'where', '$options': 'i'}}, {'description': {'$regex': 'where', '$options': 'i'}}, {'tags': {'$regex': 'where', '$options': 'i'}}, {'category': {'$regex': 'where', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'can', '$options': 'i'}}, {'description': {'$regex': 'can', '$options': 'i'}}, {'tags': {'$regex': 'can', '$options': 'i'}}, {'category': {'$regex': 'can', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'i', '$options': 'i'}}, {'description': {'$regex': 'i', '$options': 'i'}}, {'tags': {'$regex': 'i', '$options': 'i'}}, {'category': {'$regex': 'i', '$options': 'i'}}]}], '$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}
2025-07-03 08:26:24,598 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:26:29,103 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:26:29,109 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 4537ms
2025-07-03 08:26:29,109 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=2 took 4.54s
INFO:     127.0.0.1:60741 - "GET /api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=2 HTTP/1.1" 200 OK
2025-07-03 08:39:12,323 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 08:39:12,323 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 39, 12, 323267)}, '$and': [{'$or': [{'title': {'$regex': 'where', '$options': 'i'}}, {'description': {'$regex': 'where', '$options': 'i'}}, {'tags': {'$regex': 'where', '$options': 'i'}}, {'category': {'$regex': 'where', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'can', '$options': 'i'}}, {'description': {'$regex': 'can', '$options': 'i'}}, {'tags': {'$regex': 'can', '$options': 'i'}}, {'category': {'$regex': 'can', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'i', '$options': 'i'}}, {'description': {'$regex': 'i', '$options': 'i'}}, {'tags': {'$regex': 'i', '$options': 'i'}}, {'category': {'$regex': 'i', '$options': 'i'}}]}], '$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}
2025-07-03 08:39:12,349 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:39:15,790 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:39:15,791 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3468ms
2025-07-03 08:39:15,792 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=5 took 3.47s
INFO:     127.0.0.1:64610 - "GET /api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=5 HTTP/1.1" 200 OK
2025-07-03 08:40:14,037 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 40, 14, 37232)}, '$and': [{'$or': [{'title': {'$regex': 'kids', '$options': 'i'}}, {'description': {'$regex': 'kids', '$options': 'i'}}, {'tags': {'$regex': 'kids', '$options': 'i'}}, {'category': {'$regex': 'kids', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'activities', '$options': 'i'}}, {'description': {'$regex': 'activities', '$options': 'i'}}, {'tags': {'$regex': 'activities', '$options': 'i'}}, {'category': {'$regex': 'activities', '$options': 'i'}}]}], '$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}
2025-07-03 08:40:14,067 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:40:17,058 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:40:17,061 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3023ms
2025-07-03 08:40:17,061 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=kids%20activities&per_page=3 took 3.02s
INFO:     127.0.0.1:64968 - "GET /api/ai-search-v2?q=kids%20activities&per_page=3 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:40:34,385 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [90541]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:40:36,239 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:40:36,263 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:40:36,264 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:40:36,379 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:40:36,380 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [1538]
INFO:     Waiting for application startup.
2025-07-03 08:40:37,584 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:40:37,584 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:40:37,584 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:40:40,434 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [1538]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:40:41,983 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:40:42,005 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:40:42,006 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:40:42,075 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:40:42,076 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [1570]
INFO:     Waiting for application startup.
2025-07-03 08:40:43,344 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:40:43,344 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:40:43,344 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:40:49,529 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [1570]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:40:50,897 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:40:50,920 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:40:50,921 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:40:50,992 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:40:50,992 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [1586]
INFO:     Waiting for application startup.
2025-07-03 08:40:52,195 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:40:52,196 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:40:52,196 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:40:54,949 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [1586]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:40:56,338 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:40:56,359 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:40:56,359 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:40:56,430 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:40:56,431 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [1774]
INFO:     Waiting for application startup.
2025-07-03 08:40:57,537 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:40:57,537 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:40:57,537 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:41:03,012 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [1774]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:41:04,865 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:41:04,888 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:41:04,888 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:41:04,959 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:41:04,959 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [1787]
INFO:     Waiting for application startup.
2025-07-03 08:41:06,103 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:41:06,103 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:41:06,103 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:41:08,446 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [1787]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:41:09,810 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:41:09,830 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:41:09,831 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:41:09,904 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:41:09,904 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [1796]
INFO:     Waiting for application startup.
2025-07-03 08:41:11,067 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:41:11,067 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:41:11,067 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:41:12,907 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [1796]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:41:14,244 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:41:14,267 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:41:14,268 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:41:14,342 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:41:14,342 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [2034]
INFO:     Waiting for application startup.
2025-07-03 08:41:15,615 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:41:15,615 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:41:15,615 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:41:18,367 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [2034]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:41:19,681 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:41:19,702 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:41:19,702 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:41:19,774 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:41:19,775 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [2046]
INFO:     Waiting for application startup.
2025-07-03 08:41:20,971 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:41:20,971 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:41:20,971 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:41:21,901 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [2046]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:41:23,346 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:41:23,370 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:41:23,371 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:41:23,443 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:41:23,444 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [2055]
INFO:     Waiting for application startup.
2025-07-03 08:41:24,627 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:41:24,627 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:41:24,627 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:41:27,176 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [2055]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:41:28,724 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:41:28,745 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:41:28,745 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:41:28,815 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:41:28,815 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [2065]
INFO:     Waiting for application startup.
2025-07-03 08:41:30,041 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:41:30,041 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:41:30,041 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:41:31,476 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [2065]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:41:33,183 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:41:33,206 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:41:33,207 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:41:33,281 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:41:33,281 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [2221]
INFO:     Waiting for application startup.
2025-07-03 08:41:34,554 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:41:34,554 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:41:34,554 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 08:41:36,697 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [2221]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 08:41:38,128 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 08:41:38,149 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 08:41:38,149 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 08:41:38,217 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 08:41:38,217 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [2232]
INFO:     Waiting for application startup.
2025-07-03 08:41:39,333 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 08:41:39,333 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 08:41:39,333 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 08:41:40,875 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 41, 40, 875049)}, '$and': [{'$or': [{'title': {'$regex': 'kids', '$options': 'i'}}, {'description': {'$regex': 'kids', '$options': 'i'}}, {'tags': {'$regex': 'kids', '$options': 'i'}}, {'category': {'$regex': 'kids', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'activities', '$options': 'i'}}, {'description': {'$regex': 'activities', '$options': 'i'}}, {'tags': {'$regex': 'activities', '$options': 'i'}}, {'category': {'$regex': 'activities', '$options': 'i'}}]}, {'$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}]}
2025-07-03 08:41:40,904 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:41:43,908 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:41:43,911 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 3036ms
2025-07-03 08:41:43,912 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=kids%20activities&per_page=3 took 3.04s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:49184 - "GET /api/ai-search-v2?q=kids%20activities&per_page=3 HTTP/1.1" 200 OK
2025-07-03 08:41:58,078 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 41, 58, 78224)}, '$and': [{'$or': [{'title': {'$regex': 'kids', '$options': 'i'}}, {'description': {'$regex': 'kids', '$options': 'i'}}, {'tags': {'$regex': 'kids', '$options': 'i'}}, {'category': {'$regex': 'kids', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'activities', '$options': 'i'}}, {'description': {'$regex': 'activities', '$options': 'i'}}, {'tags': {'$regex': 'activities', '$options': 'i'}}, {'category': {'$regex': 'activities', '$options': 'i'}}]}, {'$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}]}
2025-07-03 08:41:58,104 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:42:04,555 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:42:04,557 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 6478ms
2025-07-03 08:42:04,557 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=kids%20activities&per_page=5 took 6.48s
INFO:     127.0.0.1:49282 - "GET /api/ai-search-v2?q=kids%20activities&per_page=5 HTTP/1.1" 200 OK
2025-07-03 08:57:33,827 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 08:57:33,827 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 8, 57, 33, 827527)}, '$and': [{'$or': [{'title': {'$regex': 'kids', '$options': 'i'}}, {'description': {'$regex': 'kids', '$options': 'i'}}, {'tags': {'$regex': 'kids', '$options': 'i'}}, {'category': {'$regex': 'kids', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'weekend', '$options': 'i'}}, {'description': {'$regex': 'weekend', '$options': 'i'}}, {'tags': {'$regex': 'weekend', '$options': 'i'}}, {'category': {'$regex': 'weekend', '$options': 'i'}}]}, {'$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}], '$or': [{'start_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'$and': [{'start_date': {'$lte': datetime.datetime(2025, 7, 5, 0, 0)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}]}]}
2025-07-03 08:57:52,154 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 08:57:57,725 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 08:57:57,729 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 23902ms
2025-07-03 08:57:57,730 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=3 took 23.90s
INFO:     127.0.0.1:52367 - "GET /api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=3 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 09:08:11,771 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [2232]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 09:08:13,432 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 09:08:13,456 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 09:08:13,457 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 09:08:13,553 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 09:08:13,553 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [5532]
INFO:     Waiting for application startup.
2025-07-03 09:08:14,793 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 09:08:14,793 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 09:08:14,793 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 09:08:17,654 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [5532]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 09:08:19,178 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 09:08:19,199 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 09:08:19,200 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 09:08:19,271 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 09:08:19,272 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [5547]
INFO:     Waiting for application startup.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
2025-07-03 09:08:20,414 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 09:08:20,414 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 09:08:20,414 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 09:08:20,435 - main - INFO - ‚úÖ All database connections closed
ERROR:    Traceback (most recent call last):
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/starlette/routing.py", line 686, in lifespan
    await receive()
  File "/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 09:08:21,994 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 09:08:22,017 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 09:08:22,018 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 09:08:22,093 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 09:08:22,093 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [5550]
INFO:     Waiting for application startup.
2025-07-03 09:08:23,221 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 09:08:23,221 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 09:08:23,221 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 09:08:25,563 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [5550]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 09:08:26,894 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 09:08:26,914 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 09:08:26,915 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 09:08:26,985 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 09:08:26,985 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [5559]
INFO:     Waiting for application startup.
2025-07-03 09:08:28,194 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 09:08:28,194 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 09:08:28,194 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
2025-07-03 09:08:30,443 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 9, 8, 30, 443351)}, '$and': [{'$or': [{'title': {'$regex': 'kids', '$options': 'i'}}, {'description': {'$regex': 'kids', '$options': 'i'}}, {'tags': {'$regex': 'kids', '$options': 'i'}}, {'category': {'$regex': 'kids', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'activities', '$options': 'i'}}, {'description': {'$regex': 'activities', '$options': 'i'}}, {'tags': {'$regex': 'activities', '$options': 'i'}}, {'category': {'$regex': 'activities', '$options': 'i'}}]}, {'$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}]}
2025-07-03 09:08:30,469 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 09:08:32,964 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 09:08:32,973 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 2529ms
2025-07-03 09:08:32,974 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=kids%20activities&per_page=2 took 2.53s
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
INFO:     127.0.0.1:55736 - "GET /api/ai-search-v2?q=kids%20activities&per_page=2 HTTP/1.1" 200 OK
2025-07-03 09:15:15,862 - routers.ai_search_optimized - INFO - Weekend detection: 2025-07-05 00:00:00 to 2025-07-06 23:59:59.999999
2025-07-03 09:15:15,862 - routers.ai_search_optimized - INFO - MongoDB query: {'status': 'active', 'end_date': {'$gte': datetime.datetime(2025, 7, 3, 9, 15, 15, 861962)}, '$and': [{'$or': [{'title': {'$regex': 'kids', '$options': 'i'}}, {'description': {'$regex': 'kids', '$options': 'i'}}, {'tags': {'$regex': 'kids', '$options': 'i'}}, {'category': {'$regex': 'kids', '$options': 'i'}}]}, {'$or': [{'title': {'$regex': 'weekend', '$options': 'i'}}, {'description': {'$regex': 'weekend', '$options': 'i'}}, {'tags': {'$regex': 'weekend', '$options': 'i'}}, {'category': {'$regex': 'weekend', '$options': 'i'}}]}, {'$or': [{'age_min': {'$lte': 12}}, {'tags': {'$in': ['children', 'kids', 'toddler']}}]}], '$or': [{'start_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 5, 0, 0), '$lte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}, {'$and': [{'start_date': {'$lte': datetime.datetime(2025, 7, 5, 0, 0)}}, {'end_date': {'$gte': datetime.datetime(2025, 7, 6, 23, 59, 59, 999999)}}]}]}
2025-07-03 09:15:15,900 - routers.ai_search_optimized - INFO - Optimized AI Search: Found 0 initial events
2025-07-03 09:15:21,055 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 09:15:21,057 - routers.ai_search_optimized - INFO - Optimized AI Search completed in 5195ms
2025-07-03 09:15:21,057 - main - WARNING - Slow request: GET http://localhost:8001/api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=2 took 5.20s
INFO:     127.0.0.1:57613 - "GET /api/ai-search-v2?q=where%20can%20i%20take%20my%20kids%20this%20weekend&per_page=2 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 10:04:16,366 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [5559]
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 10:04:18,156 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 10:04:18,181 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 10:04:18,182 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 10:04:18,275 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 10:04:18,276 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [15654]
INFO:     Waiting for application startup.
2025-07-03 10:04:19,474 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 10:04:19,474 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 10:04:19,474 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routers/ai_search_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 10:04:24,042 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [15654]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 10:04:25,478 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 10:04:25,499 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 10:04:25,499 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 10:04:25,576 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 10:04:25,576 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [15679]
INFO:     Waiting for application startup.
2025-07-03 10:04:26,753 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 10:04:26,753 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 10:04:26,753 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 10:05:47,122 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [15679]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 10:05:48,795 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 10:05:48,817 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 10:05:48,817 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 10:05:48,919 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 10:05:48,919 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [15871]
INFO:     Waiting for application startup.
2025-07-03 10:05:50,083 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 10:05:50,084 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 10:05:50,084 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/openai_service_optimized.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 10:05:54,653 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [15871]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 10:05:56,172 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 10:05:56,192 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 10:05:56,193 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 10:05:56,267 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 10:05:56,267 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [15891]
INFO:     Waiting for application startup.
2025-07-03 10:05:57,444 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 10:05:57,444 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 10:05:57,444 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_kids_weekend_search.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 10:06:38,719 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [15891]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
WARNING:  WatchFiles detected changes in 'test_kids_weekend_search.py'. Reloading...
WARNING:  WatchFiles detected changes in 'test_kids_weekend_search.py'. Reloading...
WARNING:  WatchFiles detected changes in 'test_kids_weekend_search.py'. Reloading...
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 10:06:41,437 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 10:06:41,457 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 10:06:41,458 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 10:06:41,540 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 10:06:41,540 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [15924]
INFO:     Waiting for application startup.
2025-07-03 10:06:42,762 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 10:06:42,762 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 10:06:42,762 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_kids_weekend_search.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 10:06:45,722 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [15924]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 10:06:47,187 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 10:06:47,207 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 10:06:47,208 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 10:06:47,275 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 10:06:47,276 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [15933]
INFO:     Waiting for application startup.
2025-07-03 10:06:48,510 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 10:06:48,511 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 10:06:48,511 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_kids_weekend_search.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-07-03 10:06:50,860 - main - INFO - ‚úÖ All database connections closed
INFO:     Application shutdown complete.
INFO:     Finished server process [15933]
‚úÖ MongoDB Atlas connected successfully to database: DXB
‚úÖ MongoDB indexes created successfully (including lifecycle management and user auth)
‚úÖ Redis connected successfully
‚ö†Ô∏è Elasticsearch connection failed (optional for development): 'NoneType' object has no attribute 'info'
‚ö†Ô∏è Error closing connections: 'NoneType' object has no attribute 'close'
/Users/saleemjadallah/Desktop/DXB-events/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
2025-07-03 10:06:52,405 - main - INFO - ‚úÖ AI search router imported successfully
2025-07-03 10:06:52,426 - services.openai_service_optimized - INFO - ‚úÖ Optimized OpenAI service initialized with model: gpt-4o-mini
2025-07-03 10:06:52,427 - main - INFO - ‚úÖ Optimized AI search router imported successfully
2025-07-03 10:06:52,500 - main - INFO - ‚úÖ AI search router included successfully
2025-07-03 10:06:52,500 - main - INFO - ‚úÖ Optimized AI search router included successfully
INFO:     Started server process [15934]
INFO:     Waiting for application startup.
2025-07-03 10:06:53,690 - main - INFO - ‚úÖ MongoDB Atlas database initialized successfully
2025-07-03 10:06:53,690 - main - INFO - üöÄ DXB Events API v1.0.0 started successfully!
2025-07-03 10:06:53,690 - main - INFO - üìã MongoDB Atlas database: DXB
INFO:     Application startup complete.
